version: "3.7"
services:
  newgim:
    restart: "no"
    container_name: ng
    build:
      context: .
      dockerfile: Dockerfile
    image: newgim 
    runtime: nvidia
    #user: "1007:1007"
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - CPL_DEBUG=ON
    volumes:
      # bind . on host to /home/root in container (allows editing code)
      #- .:/home/root
      - type: bind
        source: .
        target: /home/root
        #volume:
        #  nocopy: true
      # bind data drives
      - type: bind
        source: ./data
        target: /home/root/data

      - type: bind
        source: ./saved_models/ebs_trained_models
        target: /home/root/saved_models/ebs_trained_models

      - type: bind
        source: ./results
        target: /home/root/results

      - type: bind
        source: ./processed
        target: /home/root/processed

      - type: bind
        source: ./TRAIN
        target: /home/root/TRAIN


